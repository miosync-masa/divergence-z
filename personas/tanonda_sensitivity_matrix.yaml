# =============================================================================
# Context Sensitivity Matrix Test
# 同じ言葉「頼んだぞ」が、コンテキストによって訳し分けられるか検証
# =============================================================================
# 
# 目的: Z軸翻訳の「感度」を検証
# - 保存テスト（IAP）: 同じ行為 → 同じ行為？
# - 感度テスト: 違うコンテキスト → 違う行為？
#
# 失敗条件: 全て "I'm counting on you" のような平均的な訳になったら敗北
# =============================================================================

test_cases:
  # =========================================================================
  # Case 1: 戦場（High Gravity / Formal）
  # =========================================================================
  - id: "battlefield"
    name: "The Last Command - 最期の指令"
    
    scene: |
      激戦の宇宙戦艦ブリッジ。
      艦長は致命傷を負い、指揮権を副官に譲る瞬間。
      艦長の目には涙はない。ただ、信頼がある。
    
    relationship: "艦長(Mentor/上官) → 副官(Successor/部下)"
    
    context_block: |
      [状況] 敵艦隊の攻撃で艦橋が半壊
      [状況] 艦長は腹部に致命傷、残り時間は僅か
      [副官] 艦長！ご無事ですか！
      [艦長] ...もう、いい。お前が引き継げ。
      [副官] そんな...！まだ...！
      [艦長] 頼んだぞ。
    
    target_line: "頼んだぞ"
    target_lang: "en"
    z_axis_intensity: "high"
    
    expected:
      act: "Command / Legacy Transfer (命令・遺志の継承)"
      tone: "重い、荘厳、最期の言葉"
      possible_translations:
        - "I'm leaving it to you."
        - "Make me proud."
        - "It's yours now."
        - "I'm entrusting everything to you."
      forbidden:
        - "I'm counting on you." # 軽すぎる
        - "Take care of it." # 事務的すぎる

  # =========================================================================
  # Case 2: 日常の相棒（Low Gravity / Casual）
  # =========================================================================
  - id: "casual"
    name: "AFK - ちょっとコンビニ"
    
    scene: |
      休日の自室。
      オンラインゲームの協力プレイ中。
      トイレ休憩、ついでにコンビニ行ってくる。
    
    relationship: "友人A → 友人B（悪友・対等）"
    
    context_block: |
      [状況] 深夜2時、ボイチャ繋ぎっぱなしでゲーム中
      [状況] ちょっと小腹が空いた
      [友人A] あー腹減った。コンビニ行ってくるわ
      [友人B] マジ？今ボス戦始まりそうなんだけど
      [友人A] 大丈夫大丈夫、頼んだぞ
    
    target_line: "頼んだぞ"
    target_lang: "en"
    z_axis_intensity: "low"
    
    expected:
      act: "Casual Request (軽い依頼)"
      tone: "軽い、フランク、日常"
      possible_translations:
        - "Cover me."
        - "Hold the fort."
        - "You got this."
        - "Don't die on me."
      forbidden:
        - "I'm entrusting everything to you." # 重すぎる
        - "Make me proud." # 場違い

  # =========================================================================
  # Case 3: 決別（Twisted Gravity / Conflict）
  # =========================================================================
  - id: "betrayal"
    name: "The Betrayal - 裏切り者への皮肉"
    
    scene: |
      雨の廃工場。
      主人公が、裏切って敵組織に行った親友に背を向けて去る瞬間。
      かつての絆は、今は毒になっている。
    
    relationship: "主人公 → 裏切り者（かつての親友・複雑な愛憎）"
    
    context_block: |
      [状況] 親友だった男が敵組織に寝返った
      [状況] 最後の対峙、主人公は去ることを選ぶ
      [裏切り者] ...お前は俺を止めないのか
      [主人公] お前はもう、俺の知ってる奴じゃない
      [裏切り者] ...
      [主人公] （背を向けて）頼んだぞ
    
    target_line: "頼んだぞ"
    target_lang: "en"
    z_axis_intensity: "high"
    
    expected:
      act: "Irony / Pressure (皮肉・プレッシャー)"
      tone: "冷たい、皮肉、突き放し、でも一抹の期待"
      possible_translations:
        - "Don't disappoint me."
        - "Prove me wrong."
        - "Do what you must."
        - "Show me what you've become."
      forbidden:
        - "I'm counting on you." # 皮肉が消える
        - "Good luck." # 軽すぎる

# =============================================================================
# 検証基準
# =============================================================================
evaluation_criteria:
  success:
    - "3つのケースで明確に異なる訳が出力される"
    - "各ケースのexpected.actに対応する行為が翻訳に反映される"
    - "forbidden リストの訳が出ない"
  
  failure:
    - "全て同じような訳になる（平均化）"
    - "コンテキストの重力が反映されない"
    - "トーンが一定になる"

# =============================================================================
# 理論的背景
# =============================================================================
theory:
  principle: |
    同じ言葉でも、コンテキスト（重力場）が変われば、
    実行される言語行為（illocutionary act）は異なる。
    
    Z軸翻訳が「行為保存」を主張するなら、
    「異なる行為は異なる行為として訳し分けられる」ことも示す必要がある。
  
  connection_to_iap: |
    IAP（保存テスト）: 変わるべきでないものが変わっていないか
    Sensitivity（感度テスト）: 変わるべきものがちゃんと変わっているか
    
    両方が成立して初めて「行為同型写像」の証明となる。
